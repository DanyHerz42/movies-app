(this.webpackJsonpmovreview=this.webpackJsonpmovreview||[]).push([[0],{178:function(e,t,a){},179:function(e,t,a){},180:function(e,t,a){},303:function(e,t,a){},306:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(12),i=a.n(s),o=(a(178),a(179),a(37)),c=a(16),l=a(9),d=a(350),u=a(373),j=a(348),h=a(65),m=(a(180),a.p+"static/media/log.1633e639.png"),p=a(19),b=a(13),x=a.n(b),O=a(22),g=a(33),f=a(14),v=a(372),y=a(346),w=a(378),k=a(349),C=a(375),S=a(15),B=a.n(S),T=a(2),L=f.b({email:f.c("Enter your email").email("Enter a valid email").required("Email is required"),password:f.c("Enter your password").min(8,"Password should be of minimum 8 characters length").required("Password is required")}),W=function(){var e,t=Object(c.g)();document.title="Login - Movies";var a=Object(n.useState)(!1),r=Object(l.a)(a,2),s=r[0],i=r[1],o=Object(n.useState)(!1),d=Object(l.a)(o,2),m=d[0],b=d[1],f=Object(n.useState)(!1),S=Object(l.a)(f,2),W=S[0],E=S[1];localStorage.getItem("accessToken")&&t.push("/user-home");var q=Object(g.a)({initialValues:{email:"",password:"",keepLogged:!1},validationSchema:L,onSubmit:function(){var e=Object(O.a)(x.a.mark((function e(a){var n,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,E(!0),e.next=4,B.a.post("http://localhost:4000/sign/login",a);case 4:if(200!==(n=e.sent).status){e.next=21;break}if(!n.data.user.twoSteps){e.next=14;break}return e.next=9,B.a.post("http://localhost:4000/sign/verificationTwice",{phone:n.data.user.phone});case 9:r=e.sent,t.push({pathname:"/sign-verification",state:{values:n.data.user,code:r.data.code,token:n.data.token,keepLogged:a.keepLogged,way:2}}),E(!1),e.next=18;break;case 14:a.keepLogged&&localStorage.setItem("accessToken",n.data.token),a.keepLogged?localStorage.setItem("accessToken",n.data.token):localStorage.removeItem("accessToken"),t.push({pathname:"/user-home",state:{token:n.data.token}}),E(!1);case 18:E(!1),e.next=22;break;case 21:203===n.status?(b(!0),E(!1),setTimeout((function(){return b(!1)}),5e3)):206===n.status&&(i(!0),E(!1),setTimeout((function(){return i(!1)}),5e3));case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(0),console.error(e.t0);case 27:case"end":return e.stop()}}),e,null,[[0,24]])})));return function(t){return e.apply(this,arguments)}}()});return Object(T.jsx)(u.a,{display:"flex",flexDirection:"column",paddingX:1.5,justifyContent:"center",style:{width:"100%",height:"100%"},children:Object(T.jsxs)("form",{onSubmit:q.handleSubmit,children:[Object(T.jsx)(h.a,{variant:"h5",color:"primary",align:"center",style:{margin:"5px"},children:"Login"}),Object(T.jsx)(u.a,{display:"flex",justifyContent:"center",children:Object(T.jsx)(v.a,{fullWidth:!0,id:"email",name:"email",label:"Email",style:{margin:"5px"},value:q.values.email,onChange:q.handleChange,error:q.touched.email&&Boolean(q.errors.email),helperText:q.touched.email&&q.errors.email})}),Object(T.jsx)(u.a,{display:"flex",justifyContent:"center",children:Object(T.jsx)(v.a,{fullWidth:!0,id:"password",name:"password",label:"Password",type:"password",style:{margin:"5px"},value:q.values.password,onChange:q.handleChange,error:q.touched.password&&Boolean(q.errors.password),helperText:q.touched.password&&q.errors.password})}),Object(T.jsx)(u.a,{display:"flex",justifyContent:"center",children:Object(T.jsx)(y.a,{control:Object(T.jsx)(w.a,(e={name:"keepLogged",style:{marginBottom:"5px"},onChange:q.handleChange,value:q.values.keepLogged},Object(p.a)(e,"value",!0),Object(p.a)(e,"color","primary"),e)),label:"Keep logged in"})}),Object(T.jsxs)(u.a,{style:{marginBottom:"5px"},children:[s?Object(T.jsx)(C.a,{severity:"warning",variant:"outlined",onClose:function(){return i(!1)},children:"Incorrect password. Try another password"}):null,m?Object(T.jsx)(C.a,{severity:"warning",variant:"outlined",onClose:function(){return b(!1)},children:"No email found. Try another email"}):null]}),Object(T.jsx)(u.a,{marginBottom:1.5,children:Object(T.jsx)(j.a,{color:"primary",variant:"contained",fullWidth:!0,type:"submit",style:{margin:"5px"},children:"Log In"})}),W?Object(T.jsx)(k.a,{}):null]})})},E=a(162),q=f.b({email:f.c("Enter your email").email("Enter a valid email").required("Email is required"),username:f.c("Enter your username").required("Username is Required"),password:f.c("Enter your password").min(8,"Password should be of minimum 8 characters length").required("Password is required"),repeatPassword:f.c("Enter your password").min(8,"Password should be of minimum 8 characters length").required("Repeat password is required"),phone:f.a("Enter a phone number").required("Phone number is required")}),P=function(e){var t,a=Object(n.useState)(!1),r=Object(l.a)(a,2),s=r[0],i=r[1],o=Object(n.useState)(!1),d=Object(l.a)(o,2),m=d[0],b=d[1],f=Object(n.useState)(!1),S=Object(l.a)(f,2),L=S[0],W=S[1],P=Object(c.g)(),R=Object(n.useRef)(null),I=Object(g.a)({initialValues:{email:"",username:"",password:"",repeatPassword:"",phone:"",twoSteps:!1},validationSchema:q,onSubmit:function(){var e=Object(O.a)(x.a.mark((function e(t){var a,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!R.current.getValue()||!I.values){e.next=24;break}return e.next=4,B.a.post("http://localhost:4000/sign/verifyIfUserExists",{email:t.email});case 4:if(200!==e.sent.status){e.next=20;break}if(W(!0),!t.twoSteps){e.next=14;break}return e.next=10,B.a.post("http://localhost:4000/sign/verificationTwice",{phone:t.phone});case 10:a=e.sent,P.push({pathname:"/sign-verification",state:{values:t,code:a.data.code,way:1}}),e.next=18;break;case 14:return e.next=16,B.a.post("http://localhost:4000/sign/signup",{values:t});case 16:200===(n=e.sent).status&&(P.push({pathname:"/user-home",state:{token:n.data.token}}),localStorage.setItem("accessToken",n.data.token));case 18:e.next=22;break;case 20:b(!0),setTimeout((function(){b(!1)}),5e3);case 22:e.next=26;break;case 24:i(!0),setTimeout((function(){i(!1)}),5e3);case 26:e.next=31;break;case 28:e.prev=28,e.t0=e.catch(0),console.log(e.t0);case 31:case"end":return e.stop()}}),e,null,[[0,28]])})));return function(t){return e.apply(this,arguments)}}()});return Object(T.jsx)(u.a,{display:"flex",flexDirection:"column",paddingX:1.5,justifyContent:"center",style:{width:"100%",height:"100%"},children:Object(T.jsxs)("form",{onSubmit:I.handleSubmit,children:[Object(T.jsx)(u.a,{children:Object(T.jsx)(h.a,{variant:"h5",color:"primary",align:"Center",children:"Sign Up"})}),Object(T.jsxs)(u.a,{display:"flex",children:[Object(T.jsx)(v.a,{fullWidth:!0,id:"email",name:"email",label:"Email",marginX:1,style:{margin:"5px"},value:I.values.email,onChange:I.handleChange,error:I.touched.email&&Boolean(I.errors.email),helperText:I.touched.email&&I.errors.email}),Object(T.jsx)(v.a,{fullWidth:!0,id:"username",name:"username",label:"Username",type:"text",style:{margin:"5px"},value:I.values.username,onChange:I.handleChange,error:I.touched.username&&Boolean(I.errors.username),helperText:I.touched.username&&I.errors.username})]}),Object(T.jsxs)(u.a,{display:"flex",children:[Object(T.jsx)(v.a,{fullWidth:!0,id:"password",name:"password",label:"Password",type:"password",style:{margin:"5px"},value:I.values.password,onChange:I.handleChange,error:I.touched.password&&Boolean(I.errors.password),helperText:I.touched.password&&I.errors.password}),Object(T.jsx)(v.a,{fullWidth:!0,id:"repeatPassword",name:"repeatPassword",label:"Repeat Password",type:"password",style:{margin:"5px"},value:I.values.repeatPassword,onChange:I.handleChange,error:I.touched.repeatPassword&&Boolean(I.errors.repeatPassword),helperText:I.touched.repeatPassword&&I.errors.repeatPassword})]}),Object(T.jsx)(u.a,{children:Object(T.jsx)(v.a,{fullWidth:!0,id:"phone",name:"phone",label:"Phone number",type:"text",style:{marginBottom:"5px"},value:I.values.phone,onChange:I.handleChange,error:I.touched.phone&&Boolean(I.errors.phone),helperText:I.touched.phone&&I.errors.phone})}),Object(T.jsx)(u.a,{display:"flex",justifyContent:"center",children:Object(T.jsx)(y.a,{control:Object(T.jsx)(w.a,(t={name:"twoSteps",style:{marginBottom:"5px"},onChange:I.handleChange,value:I.values.twoSteps},Object(p.a)(t,"value",!0),Object(p.a)(t,"color","primary"),t)),label:"Turn on two-step verification"})}),Object(T.jsx)(u.a,{display:"flex",justifyContent:"center",children:Object(T.jsx)(E.a,{ref:R,style:{marginBottom:"5px"},sitekey:"6LccqDUbAAAAAIKK1KwYlATRJBeE55-mJ7dOj9th"})}),Object(T.jsxs)(u.a,{style:{marginBottom:"5px"},children:[s?Object(T.jsx)(C.a,{severity:"warning",variant:"outlined",onClose:function(){return i(!1)},children:"Please complete the recaptcha"}):null,m?Object(T.jsx)(C.a,{severity:"warning",onClose:function(){return i(!1)},children:"This email is already registered"}):null]}),Object(T.jsx)(u.a,{marginBottom:1.5,children:Object(T.jsx)(j.a,{color:"primary",variant:"contained",fullWidth:!0,type:"submit",children:"Sign in"})}),L?Object(T.jsx)(k.a,{}):null]})})},R=function(){var e=Object(n.useState)(!1),t=Object(l.a)(e,2),a=t[0],r=t[1];return Object(T.jsx)("div",{children:Object(T.jsxs)(d.a,{container:!0,justify:"flex-end",children:[Object(T.jsx)(d.a,{item:!0,xs:10,sm:10,md:10,children:Object(T.jsx)(u.a,{paddingLeft:1,bgcolor:"#2d2e4d",style:{borderBottom:"1px solid gray"},children:Object(T.jsx)("img",{src:m,width:50})})}),Object(T.jsx)(d.a,{item:!0,xs:2,sm:2,md:2,style:{backgroundColor:"#2d2e4d"},children:Object(T.jsxs)(u.a,{display:"flex",flexDirection:"row-reverse",justifyContent:"space-around",paddingTop:1,children:[Object(T.jsx)(j.a,{variant:"outlined",color:"secondary",onClick:function(){return r(!0)},children:"Sign Up"}),Object(T.jsx)(j.a,{variant:"outlined",color:"secondary",onClick:function(){return r(!1)},children:"Log In"})]})}),Object(T.jsx)(d.a,{item:!0,sm:12,md:8,className:"root",children:Object(T.jsxs)(u.a,{bgcolor:"#2d2e4d",height:"100%",className:"div-left",display:"flex",color:"white",alignItems:"center",children:[Object(T.jsx)("img",{src:m,width:200,height:200}),Object(T.jsxs)(u.a,{className:"div-headers",children:[Object(T.jsx)(h.a,{variant:"h2",color:"#fff",children:"MovReview"}),Object(T.jsx)(h.a,{variant:"h5",color:"#fff",children:"Todas las peliculas son buenas o \xbfNo tanto?"})]})]})}),Object(T.jsx)(d.a,{item:!0,sm:12,md:4,className:"root",children:Object(T.jsx)(u.a,{bgColor:"#2d2e4d",display:"flex",style:{height:"99%"},children:a?Object(T.jsx)(P,{}):Object(T.jsx)(W,{})})})]})})},I=a(351),N=(a(303),a(155)),U=f.b({codeYes:f.a("Enter a phone number").required("Phone number is required")}),Y=function(){var e=Object(c.h)(),t=Object(c.g)(),a=Object(n.useState)(0),r=Object(l.a)(a,2),s=r[0],i=r[1],o=Object(g.a)({initialValues:{codeYes:""},validationSchema:U,onSubmit:function(){var a=Object(O.a)(x.a.mark((function a(n){var r,s;return x.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,typeof e.state.values.phone===N.number&&(e.state.values.phone="+"+e.state.values.phone),a.next=4,B.a.post("http://localhost:4000/sign/verifyCode",{phone:e.state.values.phone,code:n.codeYes});case 4:if(2!==(r=a.sent).data.message){a.next=17;break}if(1!==e.state.way){a.next=14;break}return a.next=9,B.a.post("http://localhost:4000/sign/signup",{values:e.state.values});case 9:s=a.sent,t.push({pathname:"/user-home",state:{token:s.data.token}}),localStorage.setItem("accessToken",s.data.token),a.next=15;break;case 14:2===e.state.way?(e.state.keepLogged&&localStorage.setItem("accessToken",e.state.token),t.push({pathname:"/user-home",state:{token:e.state.token}})):3===e.state.way&&t.push({pathname:"/admin-dashboard",state:{token:e.state.token}});case 15:a.next=18;break;case 17:1===r.data.message?i(r.data.message):3===r.data.message&&setTimeout((function(){i(r.data.message)}),3e3);case 18:a.next=23;break;case 20:a.prev=20,a.t0=a.catch(0),console.log(a.t0);case 23:case"end":return a.stop()}}),a,null,[[0,20]])})));return function(e){return a.apply(this,arguments)}}()}),p=function(){var t=Object(O.a)(x.a.mark((function t(a){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),i(0),o.resetForm(),t.prev=3,t.next=6,B.a.post("http://localhost:4000/sign/verificationTwice",{phone:e.state.values.phone});case 6:t.sent,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e){return t.apply(this,arguments)}}();return Object(T.jsx)("div",{children:Object(T.jsxs)(d.a,{container:!0,justify:"center",children:[Object(T.jsx)(d.a,{item:!0,xs:12,sm:12,md:12,className:"border",children:Object(T.jsx)(u.a,{paddingLeft:1,bgcolor:"#2d2e4d",children:Object(T.jsx)("img",{src:m,width:50})})}),Object(T.jsx)(d.a,{item:!0,md:4,className:"form-ver",alignItems:"center",children:Object(T.jsxs)(u.a,{marginY:6,marginX:2,children:[Object(T.jsxs)(h.a,{variant:"h6",style:{textAlign:"center",marginBottom:"10px"},color:"primary",children:["We have sent a verification code of 6 digits to ",e.state.values.phone]}),Object(T.jsxs)("form",{onSubmit:o.handleSubmit,children:[Object(T.jsx)(v.a,{fullWidth:!0,id:"codeYes",name:"codeYes",label:"Enter the verification code",value:o.values.codeYes,onChange:o.handleChange,error:o.touched.codeYes&&Boolean(o.errors.codeYes),helperText:o.touched.codeYes&&o.errors.codeYes,variant:"outlined",style:{marginBottom:"10px"}}),1===s?Object(T.jsx)(C.a,{style:{marginBottom:"10px"},severity:"warning",children:"This code have expired"}):null,3===s?Object(T.jsx)(C.a,{style:{marginBottom:"10px"},severity:"error",children:"This code is invalid"}):null,Object(T.jsx)(j.a,{color:"primary",variant:"contained",disabled:1===s,fullWidth:!0,type:"submit",style:{marginBottom:"10px"},children:"Verify"}),1===s?Object(T.jsx)(I.a,{href:"#",onClick:p,text:!0,variant:"body2",children:" Resend verification code"}):null]})]})})]})})},A=a(156),D=a(4),M=a(352),V=a(24),X=a(159),F=a.n(X),J=a(158),K=a.n(J),z=a(157),G=a.n(z),H=a(160),Q=a.n(H),Z=a(358),$=a(359),_=a(360),ee=a(347),te=a(376),ae=a(357),ne=a(345),re=a(361),se=a(362),ie=a(363),oe=a(364),ce=a(379),le=a(353),de=a(354),ue=a(356),je=a(355),he=Object(M.a)((function(e){return{root:{maxWidth:200,marginRight:24,marginBottom:24},iconColor:{color:e.palette.primary}}}));function me(e){var t=he(),a=(Object(V.a)(),Object(n.useState)(!1)),r=Object(l.a)(a,2),s=(r[0],r[1],e.data);return Object(T.jsx)(le.a,{className:t.root,children:Object(T.jsxs)(de.a,{children:[Object(T.jsx)(je.a,{component:"img",alt:"Contemplative Reptile",height:"140",image:s.imageURL,title:"Contemplative Reptile"}),Object(T.jsxs)(ue.a,{children:[Object(T.jsx)(h.a,{gutterBottom:!0,variant:"subtitle",component:"p",color:"primary",style:{fontWeight:"bold"},children:s.name}),Object(T.jsxs)(h.a,{gutterBottom:!0,variant:"p",component:"p",color:"primary",children:[Object(T.jsx)("span",{style:{fontWeight:"bold"},children:"Sinopsis:"}),s.sinopsis]}),Object(T.jsx)(ae.a,{}),Object(T.jsxs)(h.a,{gutterBottom:!0,variant:"p",component:"p",color:"primary",children:[Object(T.jsx)("span",{style:{fontWeight:"bold"},children:"Produced by:"})," ",s.producedBy]})]})]})})}var pe=function(e){var t=Object(n.useState)([]),a=Object(l.a)(t,2),r=a[0],s=a[1],i=Object(n.useState)(!1),o=Object(l.a)(i,2),c=o[0],d=o[1];return Object(n.useEffect)(Object(O.a)(x.a.mark((function t(){var a,n;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,d(!0),a={headers:{"x-access-token":e.token}},t.next=5,B.a.get("http://localhost:4000/movies/list-all-movies",a);case 5:n=t.sent,s(n.data.movies),d(!1),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.error(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])}))),[]),r?Object(T.jsxs)(T.Fragment,{children:[c?Object(T.jsx)(k.a,{}):null,Object(T.jsx)(u.a,{display:"flex",width:"100%",flexWrap:"wrap",children:r.map((function(e){return Object(T.jsx)(me,{data:e})}))})]}):Object(T.jsx)(h.a,{variant:"subtitle1",color:"initial",children:"No nay"})},be=Object(M.a)((function(e){return{small:{width:e.spacing(10),height:e.spacing(10)},primaryColor:{backgroundColor:e.palette.primary.main}}})),xe=function(e){var t=Object(c.g)(),a=be(),r=(Object(V.a)(),Object(n.useState)({})),s=Object(l.a)(r,2),i=s[0],o=s[1];Object(n.useEffect)(Object(O.a)(x.a.mark((function t(){var a,n;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={headers:{"x-access-token":e.token}},t.next=3,B.a.get("http://localhost:4000/users/get-user-data",a);case 3:n=t.sent,o(n.data);case 5:case"end":return t.stop()}}),t)}))),[]);return Object(T.jsxs)("div",{children:[Object(T.jsx)(h.a,{variant:"h4",color:"initial",children:"Account details"}),Object(T.jsx)(ae.a,{inset:!0}),Object(T.jsx)(u.a,{display:"flex",justifyContent:"center",children:Object(T.jsxs)(u.a,{flexDirection:"column",display:"flex",alignItems:"center",width:300,children:[Object(T.jsx)(ce.a,{className:[a.small,a.primaryColor]}),Object(T.jsx)("br",{}),Object(T.jsxs)(h.a,{variant:"p",color:"initial",children:[Object(T.jsx)("span",{style:{fontWeight:"bold"},children:"Username: "}),i.username]}),Object(T.jsx)("br",{}),Object(T.jsxs)(h.a,{variant:"p",color:"initial",children:[Object(T.jsx)("span",{style:{fontWeight:"bold"},children:"Email: "}),i.email]}),Object(T.jsx)("br",{}),Object(T.jsxs)(h.a,{variant:"p",color:"initial",children:[Object(T.jsx)("span",{style:{fontWeight:"bold"},children:"Phone: "}),"+",i.phone]}),Object(T.jsx)("br",{}),Object(T.jsx)(j.a,{variant:"contained",color:"secondary",fullWidth:!0,onClick:function(){localStorage.removeItem("accessToken"),t.push("/")},children:"Log out"})]})})]})},Oe=240,ge=Object(M.a)((function(e){return{root:{display:"flex"},appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:Oe,width:"calc(100% - ".concat(Oe,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},hide:{display:"none"},drawer:{width:Oe,flexShrink:0,whiteSpace:"nowrap"},drawerOpen:{width:Oe,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerClose:Object(p.a)({transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:e.spacing(7)+1},e.breakpoints.up("sm"),{width:e.spacing(9)+1}),toolbar:Object(A.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:e.spacing(0,1)},e.mixins.toolbar),content:{flexGrow:1,padding:e.spacing(3)},small:{width:e.spacing(3),height:e.spacing(3)},primaryColor:{backgroundColor:e.palette.primary.main},nested:{paddingLeft:e.spacing(9)}}})),fe=function(){var e,t,a=ge(),r=Object(V.a)(),s=Object(n.useState)(!1),i=Object(l.a)(s,2),o=i[0],d=i[1],j=Object(c.h)(),b=Object(n.useState)({movies:!0,account:!1}),x=Object(l.a)(b,2),O=x[0],g=x[1];if(!localStorage.getItem("accessToken")&&!j.state)return Object(T.jsx)(c.a,{to:"/"});return Object(T.jsxs)("div",{className:a.root,children:[Object(T.jsx)(Z.a,{}),Object(T.jsx)($.a,{position:"fixed",className:Object(D.a)(a.appBar,Object(p.a)({},a.appBarShift,o)),children:Object(T.jsxs)(_.a,{children:[Object(T.jsx)(ee.a,{color:"inherit","aria-label":"open drawer",onClick:function(){d(!0)},edge:"start",className:Object(D.a)(a.menuButton,Object(p.a)({},a.hide,o)),children:Object(T.jsx)(G.a,{})}),Object(T.jsx)(u.a,{paddingRight:1,bgcolor:"#2d2e4d",children:Object(T.jsx)("img",{src:m,width:50})}),Object(T.jsx)(h.a,{variant:"h6",noWrap:!0,children:"Movies"})]})}),Object(T.jsxs)(te.a,{variant:"permanent",className:Object(D.a)(a.drawer,(e={},Object(p.a)(e,a.drawerOpen,o),Object(p.a)(e,a.drawerClose,!o),e)),classes:{paper:Object(D.a)((t={},Object(p.a)(t,a.drawerOpen,o),Object(p.a)(t,a.drawerClose,!o),t))},children:[Object(T.jsx)("div",{className:a.toolbar,children:Object(T.jsx)(ee.a,{onClick:function(){d(!1)},children:"rtl"===r.direction?Object(T.jsx)(K.a,{}):Object(T.jsx)(F.a,{})})}),Object(T.jsx)(ae.a,{}),Object(T.jsxs)(ne.a,{children:[Object(T.jsxs)(re.a,{button:!0,onClick:function(){g({movies:!0,account:!1})},children:[Object(T.jsx)(se.a,{children:Object(T.jsx)(Q.a,{color:"primary"})}),Object(T.jsx)(ie.a,{primary:"Movies",secondary:"See more categorys"})]}),Object(T.jsxs)(re.a,{button:!0,onClick:function(){g({movies:!1,account:!0})},children:[Object(T.jsx)(oe.a,{children:Object(T.jsx)(ce.a,{className:[a.small,a.primaryColor]})}),Object(T.jsx)(ie.a,{primary:"My Account",secondary:"DanyHerz42"})]})]})]}),Object(T.jsxs)("main",{className:a.content,children:[Object(T.jsx)("div",{className:a.toolbar}),O.account?Object(T.jsx)(xe,{token:localStorage.getItem("accessToken")||j.state.token}):null,O.movies?Object(T.jsx)(pe,{token:localStorage.getItem("accessToken")||j.state.token}):null]})]})},ve=f.b({email:f.c("Enter your email").email("Enter a valid email").required("Email is required"),password:f.c("Enter your password").min(8,"Password should be of minimum 8 characters length").required("Password is required")}),ye=function(){var e=Object(n.useState)(!1),t=Object(l.a)(e,2),a=t[0],r=t[1],s=Object(n.useState)(!1),i=Object(l.a)(s,2),o=i[0],b=i[1],f=Object(n.useState)(!1),y=Object(l.a)(f,2),w=y[0],S=y[1],L=Object(c.g)(),W=Object(g.a)({initialValues:{email:"",password:""},validationSchema:ve,onSubmit:function(){var e=Object(O.a)(x.a.mark((function e(t){var a,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,S(!0),e.next=4,B.a.post("http://localhost:4000/sign/auth-admin",t);case 4:if(a=e.sent,console.log(a),200!==a.status){e.next=13;break}return e.next=9,B.a.post("http://localhost:4000/sign/verificationTwice",{phone:a.data.user.phone});case 9:n=e.sent,L.push({pathname:"/sign-verification",state:{values:a.data.user,code:n.data.code,token:a.data.token,way:3}}),e.next=14;break;case 13:206===a.status?(r(!0),S(!1),setTimeout((function(){return r(!1)}),5e3)):203===a.status&&(b(!0),S(!1),setTimeout((function(){return b(!1)}),5e3));case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(0);case 18:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t){return e.apply(this,arguments)}}()});return Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(d.a,{container:!0,justify:"center",children:[Object(T.jsx)(d.a,{item:!0,xs:12,sm:12,md:12,children:Object(T.jsx)(u.a,{paddingLeft:1,bgcolor:"#2d2e4d",style:{borderBottom:"1px solid gray"},children:Object(T.jsx)("img",{src:m,width:50})})}),Object(T.jsx)(d.a,{item:!0,md:4,className:"form-ver",alignItems:"center",children:Object(T.jsxs)(u.a,{marginY:6,marginX:2,children:[Object(T.jsx)(h.a,{variant:"h6",style:{textAlign:"center",marginBottom:"10px"},color:"primary",children:"Admin Login"}),Object(T.jsxs)("form",{onSubmit:W.handleSubmit,children:[Object(T.jsx)(v.a,Object(p.a)({fullWidth:!0,id:"email",name:"email",label:"Email",style:{margin:"5px"},value:W.values.codeYes,onChange:W.handleChange,error:W.touched.email&&Boolean(W.errors.email),helperText:W.touched.email&&W.errors.email,variant:"outlined"},"style",{marginBottom:"10px"})),Object(T.jsx)(v.a,Object(p.a)({fullWidth:!0,id:"password",name:"password",label:"Password",style:{margin:"5px"},value:W.values.codeYes,onChange:W.handleChange,error:W.touched.password&&Boolean(W.errors.password),helperText:W.touched.password&&W.errors.password,variant:"outlined"},"style",{marginBottom:"10px"})),a?Object(T.jsx)(C.a,{severity:"warning",variant:"outlined",onClose:function(){return r(!1)},children:"Incorrect password. Try another password"}):null,o?Object(T.jsx)(C.a,{severity:"warning",variant:"outlined",onClose:function(){return b(!1)},children:"No email found. Try another email"}):null,Object(T.jsx)(j.a,{color:"primary",variant:"contained",fullWidth:!0,type:"submit",style:{marginBottom:"10px",marginTop:"10px"},children:"Log in"}),w?Object(T.jsx)(k.a,{}):null]})]})})]})})},we=a(366),ke=a(370),Ce=a(369),Se=a(365),Be=a(367),Te=a(368),Le=a(165),We=Object(M.a)({table:{minWidth:650}});function Ee(e){var t=Object(n.useState)([]),a=Object(l.a)(t,2),r=a[0],s=a[1],i=Object(n.useState)(!1),o=Object(l.a)(i,2),c=(o[0],o[1]),d=We();return Object(n.useEffect)(Object(O.a)(x.a.mark((function t(){var a,n;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c(!0),a={headers:{"x-access-token":e.token}},t.next=5,B.a.get("http://localhost:4000/movies/list-all-movies",a);case 5:n=t.sent,s(n.data.movies),c(!1),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.error(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])}))),[s]),r?Object(T.jsx)(Se.a,{component:Le.a,children:Object(T.jsxs)(we.a,{className:d.table,"aria-label":"simple table",children:[Object(T.jsx)(Be.a,{children:Object(T.jsxs)(Te.a,{children:[Object(T.jsx)(Ce.a,{children:"Name"}),Object(T.jsx)(Ce.a,{children:"Sinopsis"}),Object(T.jsx)(Ce.a,{children:"Produced By"}),Object(T.jsx)(Ce.a,{children:"imageURL"})]})}),Object(T.jsx)(ke.a,{children:r.map((function(e){return Object(T.jsxs)(Te.a,{children:[Object(T.jsx)(Ce.a,{component:"th",scope:"row",children:e.name}),Object(T.jsx)(Ce.a,{children:e.sinopsis?"True":null}),Object(T.jsx)(Ce.a,{children:e.producedBy}),Object(T.jsx)(Ce.a,{children:e.imageURL?"True":null})]},e.name)}))})]})}):Object(T.jsx)(k.a,{})}var qe=f.b({name:f.c("Enter your a name").required("This field is required"),sinopsis:f.c("Enter your a sinopsis").required("This field is required"),producedBy:f.c("Enter a text").required("This field is required"),imageURL:f.c("Enter a image URL").required("This field is required")}),Pe=function(e){var t=Object(n.useState)(!1),a=Object(l.a)(t,2),r=a[0],s=a[1],i=Object(n.useState)(!1),o=Object(l.a)(i,2),m=o[0],p=o[1],b=Object(c.g)(),f=Object(g.a)({initialValues:{name:"",sinopsis:"",producedBy:"",imageURL:""},validationSchema:qe,onSubmit:function(){var t=Object(O.a)(x.a.mark((function t(a){var n;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s(!0),n={headers:{"x-access-token":e.token}},t.next=5,B.a.post("http://localhost:4000/movies/create-movie",a,n);case 5:t.sent,f.handleReset(),s(!1),p(!0),window.location.reload(),setTimeout((function(){p(!1)}),4e3),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),console.error(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}()});return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(d.a,{item:!0,sm:12,md:12,lg:3,children:Object(T.jsxs)(u.a,{padding:2,children:[Object(T.jsxs)("form",{onSubmit:f.handleSubmit,children:[Object(T.jsx)(h.a,{variant:"h6",color:"initial",style:{textAlign:"center"},children:"Add movie"}),Object(T.jsx)(v.a,{fullWidth:!0,id:"name",name:"name",label:"name",value:f.values.name,onChange:f.handleChange,error:f.touched.name&&Boolean(f.errors.name),helperText:f.touched.name&&f.errors.name,variant:"outlined",style:{marginBottom:"10px"}}),Object(T.jsx)(v.a,{fullWidth:!0,id:"sinopsis",name:"sinopsis",label:"sinopsis",value:f.values.sinopsis,onChange:f.handleChange,error:f.touched.sinopsis&&Boolean(f.errors.sinopsis),helperText:f.touched.sinopsis&&f.errors.sinopsis,variant:"outlined",multiline:!0,rows:4,style:{marginBottom:"10px"}}),Object(T.jsx)(v.a,{fullWidth:!0,id:"producedBy",name:"producedBy",label:"Produced By",value:f.values.producedBy,onChange:f.handleChange,error:f.touched.producedBy&&Boolean(f.errors.producedBy),helperText:f.touched.producedBy&&f.errors.producedBy,variant:"outlined",style:{marginBottom:"10px"}}),Object(T.jsx)(v.a,{fullWidth:!0,id:"imageURL",name:"imageURL",label:"imageURL",value:f.values.imageURL,onChange:f.handleChange,error:f.touched.imageURL&&Boolean(f.errors.imageURL),helperText:f.touched.imageURL&&f.errors.imageURL,variant:"outlined",style:{marginBottom:"10px"}}),m?Object(T.jsx)(C.a,{severity:"success",style:{marginBottom:"10px"},children:"movie added successfully!"}):null,Object(T.jsx)(j.a,{color:"primary",variant:"contained",fullWidth:!0,type:"submit",style:{marginBottom:"10px"},children:"add"}),r?Object(T.jsx)(k.a,{}):null]}),Object(T.jsx)(ae.a,{}),Object(T.jsx)(j.a,{color:"secondary",variant:"contained",fullWidth:!0,type:"submit",style:{marginBottom:"10px",marginTop:"10px"},onClick:function(){return b.push("/admin-login")},children:"log out"})]})}),Object(T.jsx)(d.a,{item:!0,sm:12,md:12,lg:9,children:Object(T.jsx)(Ee,{token:e.token})})]})},Re=function(){var e=Object(c.h)();return e.state?Object(T.jsxs)(d.a,{container:!0,children:[Object(T.jsx)(d.a,{item:!0,xs:12,sm:12,md:12,children:Object(T.jsxs)(u.a,{paddingLeft:1,display:"flex",alignItems:"center",bgcolor:"#2d2e4d",style:{borderBottom:"1px solid gray"},children:[Object(T.jsx)("img",{src:m,width:50,style:{paddingRight:"12px"}}),Object(T.jsx)(h.a,{variant:"h6",style:{color:"white"},children:"Movies Administrator"})]})}),Object(T.jsx)(Pe,{token:e.state.token})]}):Object(T.jsx)(c.a,{to:"/admin-login"})};var Ie=function(){return Object(T.jsx)(o.a,{children:Object(T.jsxs)(c.d,{children:[Object(T.jsx)(c.b,{path:"/",exact:!0,component:R}),Object(T.jsx)(c.b,{path:"/user-signup",exact:!0,component:W}),Object(T.jsx)(c.b,{path:"/sign-verification",exact:!0,component:Y}),Object(T.jsx)(c.b,{path:"/user-home",exact:!0,component:fe}),Object(T.jsx)(c.b,{path:"/admin-login",exact:!0,component:ye}),Object(T.jsx)(c.b,{path:"/admin-dashboard",exact:!0,component:Re})]})})},Ne=a(371),Ue=a(161),Ye=Object(Ue.a)({palette:{primary:{main:"#2d2e4d"},secondary:{main:"#ff0000"}}});i.a.render(Object(T.jsx)(r.a.StrictMode,{children:Object(T.jsx)(Ne.a,{theme:Ye,children:Object(T.jsx)(Ie,{})})}),document.getElementById("root"))}},[[306,1,2]]]);
//# sourceMappingURL=main.69a6528c.chunk.js.map